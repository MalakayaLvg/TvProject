{% extends 'base.html.twig' %}

{% block title %}Our films {% endblock %}

{% block body %}
    <a class="linkToReturnHome" href="{{ path('app_film') }}">
        <svg width="39" height="39" viewBox="0 0 39 39" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10.4 30.875L8.125 28.6L17.225 19.5L8.125 10.4L10.4 8.125L19.5 17.225L28.6 8.125L30.875 10.4L21.775 19.5L30.875 28.6L28.6 30.875L19.5 21.775L10.4 30.875Z"
                  fill="white"/>
        </svg>
    </a>
    <div class="imgContainer">
        <img class="backgroundIMG" src="{{ vich_uploader_asset(element.horizontalImages[0]) }}" alt="">

    </div>
    <div class="informations">

        <h2>{{ element.title }}</h2>
        <div>

            <p>{{ element.description }}</p>
            <div class="right">
                <div>
                    <h3>Actors</h3>
                    <p>Paul Rudd, Evangeline Lilly, Michael Douglas, Michael Pena</p>
                </div>
                {% if type == "film" %}
                    <div>
                    <h3>Runtime</h3>
                    <p>{{ element.runtime // 60 }}h{{ '%02d'|format(element.runtime % 60) }}</p>

                    </div>{% else %}
                    <div>
                        <h3>Seasons</h3>
                        <p>{{ element.seasons | length }}</p>
                    </div>
                {% endif %}
                <div>
                    <h3>Rate</h3>
                    <p>{{ element.criticalRate }}/5</p>
                </div>


            </div>
        </div>

    </div>
    <div class="buttons">

        <a href="{{ type == "series" ? path('watchlist_add_series',{'id':element.id}) : path('watchlist_add_film',{'id':element.id}) }}"
           class="button1">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M18.483 16.7671C17.1162 17.0953 15.6893 17.0794 14.3301 16.7208C12.9709 16.3622 11.7219 15.6721 10.6948 14.7124C9.6678 13.7526 8.89481 12.5531 8.44511 11.2213C7.9954 9.88951 7.883 8.46696 8.11799 7.08105C8.08279 7.11615 8.04502 7.14858 8.00499 7.17805C7.72499 7.39105 7.37499 7.47005 6.67499 7.62805L6.03999 7.77205C3.57999 8.32905 2.34999 8.60706 2.05699 9.54806C1.76499 10.4881 2.60299 11.4691 4.27999 13.4301L4.71399 13.9371C5.18999 14.4941 5.42899 14.7731 5.53599 15.1171C5.64299 15.4621 5.60699 15.8341 5.53499 16.5771L5.46899 17.2541C5.21599 19.8711 5.08899 21.1791 5.85499 21.7601C6.62099 22.3411 7.77299 21.8121 10.075 20.7511L10.672 20.4771C11.326 20.1751 11.653 20.0251 12 20.0251C12.347 20.0251 12.674 20.1751 13.329 20.4771L13.924 20.7511C16.227 21.8111 17.379 22.3411 18.144 21.7611C18.911 21.1791 18.784 19.8711 18.531 17.2541L18.483 16.7671Z"
                      fill="black"/>
                <path opacity="0.5"
                      d="M9.15294 5.408L8.82494 5.996C8.46494 6.642 8.28494 6.965 8.00494 7.178C8.04494 7.148 8.08261 7.11567 8.11794 7.081C7.8829 8.46701 7.99528 9.88967 8.44504 11.2216C8.8948 12.5535 9.66788 13.7531 10.695 14.7128C11.7222 15.6726 12.9714 16.3627 14.3307 16.7212C15.69 17.0797 17.117 17.0954 18.4839 16.767L18.4639 16.577C18.3929 15.834 18.3569 15.462 18.4639 15.117C18.5709 14.773 18.8089 14.494 19.2859 13.937L19.7199 13.43C21.3969 11.47 22.2349 10.489 21.9419 9.548C21.6499 8.607 20.4199 8.328 17.9599 7.772L17.3239 7.628C16.6249 7.47 16.2749 7.391 15.9939 7.178C15.7139 6.965 15.5339 6.642 15.1739 5.996L14.8469 5.408C13.5799 3.136 12.9469 2 11.9999 2C11.0529 2 10.4199 3.136 9.15294 5.408Z"
                      fill="black"/>
            </svg>
            Add to watchlist</a>
        <a href="{{ type == "series" ? path('app_comment_create_series',{'id':element.id}) : path('app_comment_create_film',{'id':element.id}) }}"
           class="button2">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21.2499 12C21.2515 13.2145 21.0133 14.4173 20.5491 15.5396C20.085 16.6618 19.4039 17.6815 18.5449 18.54C17.6855 19.3996 16.6651 20.0814 15.5421 20.5464C14.4191 21.0114 13.2154 21.2505 11.9999 21.25C10.6917 21.2529 9.39792 20.9767 8.2049 20.44L4.3379 21.012C4.1459 21.0433 3.94915 21.0274 3.76474 20.9654C3.58033 20.9034 3.41383 20.7974 3.27971 20.6565C3.14559 20.5155 3.0479 20.344 2.99513 20.1568C2.94236 19.9695 2.9361 19.7722 2.9769 19.582L3.5139 15.659C3.00309 14.5072 2.74269 13.26 2.7499 12C2.74835 10.7855 2.98649 9.5827 3.45066 8.46044C3.91484 7.33817 4.59593 6.31855 5.4549 5.46C6.31429 4.60042 7.33467 3.91864 8.4577 3.45364C9.58074 2.98864 10.7844 2.74954 11.9999 2.75C14.4545 2.75016 16.8086 3.72491 18.5449 5.46C19.4034 6.31888 20.0842 7.33856 20.5484 8.46075C21.0125 9.58294 21.2509 10.7856 21.2499 12Z"
                      stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            Comment</a>
    </div>
    <details class="showCommentContainer">
        <summary class="comments">
            {% for comment in element.comments |slice(0, 5) %}
                <div class="">
                    <div>
                        <span>{{ comment.userComment.username }}</span><span
                                class="date">{{ comment.createdAt | date('d.m.Y') }}</span>
                    </div>

                    <p>{{ comment.content }}</p>
                </div>
            {% endfor %}
        </summary>
        <div class="comments">
            {% for comment in element.comments|slice(5) %}
                <div class="">
                    <div>
                        <span>{{ comment.userComment.username }}</span><span
                                class="date">{{ comment.createdAt | date('d.m.Y') }}</span>
                    </div>

                    <p>{{ comment.content }}</p>
                </div>
            {% endfor %}
        </div>


    </details>





    {% if type == "series" %}
        <div class="seasonsAndEpisode">
            {% for season in element.seasons %}

                <details class="oneSeasonAndItsEpisodese">
                    <summary>
                        <div class="oneSeason">
                            <img src="{{ asset('img/no_image.png') }}" alt="">
                            <div>
                                <h3>Season {{ season.number }} ({{ season.episodes|length }} Ã©pisodes) : {{ season.title }}</h3>
                                <p>{{ season.description == "" ? "Aucune description" : season.description }}</p>
                            </div>
                        </div>


                    </summary>
                    <div>
                        {% for episode in season.episodes %}
                            <div class="oneEpisode">
                                <h5>Episode {{ episode.number }} : {{ episode.title }}</h5>
                                <p>{{ episode.description =="" ? "Aucune description": episode.description }}</p>
                            </div>

                        {% endfor %}
                    </div>


                </details>


                {% if not loop.last %}
                <hr>
                {% endif %}

            {% endfor %}
        </div>
    {% endif %}
{% endblock %}
